<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Energy & Work - p6sims</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../../style.css">
    <style>
        /* Simulation Specific Styles */
        :root {
            --panel-bg-color: #f8fafc;
            --slider-track-color: #e2e8f0;
            --code-bg-color: #f1f5f9;
            --pe-color: #a855f7;
            --ke-color: #f59e0b;
            --total-color: #10b981;
        }

        body {
            display: block;
            padding: 0;
            background-color: var(--bg-color);
        }

        .simulation-wrapper {
            max-width: 900px;
            margin: 40px auto;
            background: var(--surface-color);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
            padding: 30px;
            border: 1px solid var(--border-color);
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2rem;
        }

        .controls-panel {
            margin-bottom: 24px;
            padding: 20px;
            background-color: var(--panel-bg-color);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
        }

        .control-group {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border-color);
        }

        .control-group:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .control-item {
            display: flex;
            align-items: center;
            flex: 1 1 250px;
        }

        .control-item label {
            min-width: 100px;
            font-weight: 500;
            color: var(--text-muted);
        }

        input[type="range"] {
            flex-grow: 1;
            margin: 0 12px;
            cursor: pointer;
            height: 6px;
            background: var(--slider-track-color);
            border-radius: 4px;
            appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 16px;
            height: 16px;
            background: var(--primary-color);
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.1s;
        }

        input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.2);
        }

        .value-display {
            min-width: 60px;
            text-align: right;
            font-family: monospace;
            font-weight: 600;
            color: var(--primary-color);
        }

        .sim-button {
            padding: 10px 24px;
            background-color: var(--text-main);
            color: white;
            border: none;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            margin: 0 5px;
        }

        .sim-button:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .sim-button.secondary {
            background-color: transparent;
            color: var(--text-main);
            border: 1px solid var(--border-color);
        }

        canvas {
            border: 1px solid var(--border-color);
            background-color: #ffffff;
            display: block;
            width: 100%;
            height: 450px;
            border-radius: var(--radius-md);
            margin-bottom: 24px;
        }

        .info-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            padding: 15px;
            background: #eff6ff;
            border-radius: var(--radius-md);
            margin-bottom: 24px;
            border: 1px solid #dbeafe;
        }

        .info-item {
            text-align: center;
        }

        .info-item strong {
            display: block;
            font-size: 0.75rem;
            text-transform: uppercase;
            color: var(--text-muted);
            margin-bottom: 4px;
        }

        .info-item span {
            font-size: 1.1rem;
            font-weight: 600;
        }

        .info-item.pe span {
            color: var(--pe-color);
        }

        .info-item.ke span {
            color: var(--ke-color);
        }

        .info-item.total span {
            color: var(--total-color);
        }

        /* Notes Section */
        .notes-section {
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            overflow: hidden;
            background: var(--bg-color);
        }

        .notes-header {
            padding: 16px 20px;
            background: white;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
        }

        .notes-header h3 {
            margin: 0;
            font-size: 1.1rem;
        }

        .notes-content {
            padding: 20px;
            display: none;
        }

        .notes-section.notes-open .notes-content {
            display: block;
        }

        .note-block {
            margin-bottom: 20px;
        }

        .note-block h4 {
            color: var(--text-main);
            margin-bottom: 8px;
        }

        .note-block p,
        .note-block li {
            color: var(--text-muted);
            font-size: 0.95rem;
        }

        code {
            background: var(--code-bg-color);
            padding: 2px 6px;
            border-radius: 4px;
            color: var(--primary-color);
            font-size: 0.9em;
        }

        .lang-button {
            padding: 4px 10px;
            font-size: 0.75rem;
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            cursor: pointer;
            color: var(--text-secondary);
            transition: all 0.2s;
        }

        .lang-button:hover {
            border-color: var(--primary-color);
            color: var(--primary-color);
        }
    </style>
</head>

<body>

    <header class="site-header">
        <div class="container">
            <a href="../../index.html" class="logo">p6sims</a>
            <nav class="nav-links">
                <a href="../../index.html#simulations">All Simulations</a>
                <a href="../../index.html#about">About</a>
            </nav>
        </div>
    </header>

    <main class="container">
        <div class="simulation-wrapper">
            <div style="margin-bottom: 20px;">
                <a href="../../mechanics.html" style="color: var(--text-muted); font-size: 0.9rem;">&larr; Back to
                    Mechanics</a>
            </div>

            <h1>Energy & Work Simulation</h1>

            <div class="controls-panel">
                <div class="control-group">
                    <div class="control-item">
                        <label>Mass:</label>
                        <input type="range" id="mass" min="1" max="10" value="2">
                        <span id="massValue" class="value-display">2 kg</span>
                    </div>
                    <div class="control-item">
                        <label>Initial Height:</label>
                        <input type="range" id="height" min="0" max="200" value="150">
                        <span id="heightValue" class="value-display">150 m</span>
                    </div>
                </div>
                <div class="control-group">
                    <div class="control-item">
                        <label>Gravity:</label>
                        <input type="range" id="gravity" min="1" max="20" step="0.5" value="9.8">
                        <span id="gravityValue" class="value-display">9.8 m/s²</span>
                    </div>
                    <div class="control-item">
                        <label>Show Energy Bars:</label>
                        <input type="checkbox" id="showBars" checked>
                    </div>
                </div>
                <div style="text-align: center; margin-top: 10px;">
                    <button id="dropButton" class="sim-button">Drop</button>
                    <button id="resetButton" class="sim-button secondary">Reset</button>
                </div>
            </div>

            <div class="info-panel">
                <div class="info-item pe"><strong>Potential Energy</strong> <span id="peValue">0 J</span></div>
                <div class="info-item ke"><strong>Kinetic Energy</strong> <span id="keValue">0 J</span></div>
                <div class="info-item total"><strong>Total Energy</strong> <span id="totalValue">0 J</span></div>
                <div class="info-item"><strong>Velocity</strong> <span id="velocityValue">0 m/s</span></div>
            </div>

            <canvas id="energyCanvas"></canvas>

            <section id="notesSection" class="notes-section">
                <div class="notes-header">
                    <h3 data-lang-key="notesTitle">Energy Conservation & Work</h3>
                    <button id="langToggleButton" class="lang-button">தமிழ்</button>
                </div>
                <div class="notes-content">
                    <div class="note-block">
                        <h4 data-lang-key="conservationTitle">Law of Conservation of Energy</h4>
                        <p data-lang-key="conservationDesc">Energy cannot be created or destroyed, only transformed from
                            one form to another. In this simulation, gravitational potential energy (PE) converts to
                            kinetic energy (KE) as the object falls, while the total mechanical energy remains constant
                            (ignoring air resistance).</p>
                    </div>
                    <div class="note-block">
                        <h4 data-lang-key="equationsTitle">Key Equations</h4>
                        <ul>
                            <li data-lang-key="eqPE">Gravitational Potential Energy: <code>PE = mgh</code></li>
                            <li data-lang-key="eqKE">Kinetic Energy: <code>KE = ½mv²</code></li>
                            <li data-lang-key="eqTotal">Total Mechanical Energy: <code>E_total = PE + KE</code></li>
                            <li data-lang-key="eqWork">Work: <code>W = F × d × cos(θ)</code></li>
                            <li data-lang-key="eqWorkEnergy">Work-Energy Theorem: <code>W = ΔKE</code></li>
                        </ul>
                        <p data-lang-key="eqVars"><em>Where: m=mass, g=gravity, h=height, v=velocity, F=force,
                                d=displacement, θ=angle</em></p>
                    </div>
                    <div class="note-block">
                        <h4 data-lang-key="energyTypesTitle">Types of Energy</h4>
                        <ul>
                            <li data-lang-key="peType"><strong>Potential Energy (PE):</strong> Energy stored due to
                                position or configuration. In this case, gravitational PE depends on height.</li>
                            <li data-lang-key="keType"><strong>Kinetic Energy (KE):</strong> Energy of motion. Increases
                                as the object accelerates downward.</li>
                        </ul>
                    </div>
                    <div class="note-block">
                        <h4 data-lang-key="tipsTitle">Simulation Tips</h4>
                        <ul>
                            <li data-lang-key="tip1">Watch how PE decreases while KE increases, but total energy stays
                                constant.</li>
                            <li data-lang-key="tip2">Try different masses - notice that total energy scales with mass.
                            </li>
                            <li data-lang-key="tip3">Change gravity to see how it affects the rate of energy conversion.
                            </li>
                        </ul>
                    </div>
                </div>
            </section>

        </div>
    </main>

    <footer class="site-footer">
        <div class="container">
            <p>&copy; <span id="currentYear"></span> p6sims. Built by Hai.</p>
        </div>
    </footer>

    <script>
        document.getElementById('currentYear').textContent = new Date().getFullYear();
    </script>

    <script>
        // Core simulation logic
        const canvas = document.getElementById('energyCanvas');
        const ctx = canvas.getContext('2d');
        const canvasHeight = 450;

        // Controls
        const massSlider = document.getElementById('mass');
        const heightSlider = document.getElementById('height');
        const gravitySlider = document.getElementById('gravity');
        const showBarsCheck = document.getElementById('showBars');
        const dropButton = document.getElementById('dropButton');
        const resetButton = document.getElementById('resetButton');

        // Value displays
        const massValueSpan = document.getElementById('massValue');
        const heightValueSpan = document.getElementById('heightValue');
        const gravityValueSpan = document.getElementById('gravityValue');
        const peValueSpan = document.getElementById('peValue');
        const keValueSpan = document.getElementById('keValue');
        const totalValueSpan = document.getElementById('totalValue');
        const velocityValueSpan = document.getElementById('velocityValue');

        let mass, initialHeight, g;
        let isDropping = false;
        let currentHeight = 0;
        let velocity = 0;
        let animationFrameId = null;
        let lastTimestamp = 0;

        const GROUND_Y = 380;
        const SCALE = 1.5; // pixels per meter
        const BALL_RADIUS = 15;

        function updateParameters() {
            mass = parseFloat(massSlider.value);
            initialHeight = parseFloat(heightSlider.value);
            g = parseFloat(gravitySlider.value);

            massValueSpan.textContent = mass.toFixed(0) + ' kg';
            heightValueSpan.textContent = initialHeight.toFixed(0) + ' m';
            gravityValueSpan.textContent = g.toFixed(1) + ' m/s²';

            if (!isDropping) {
                currentHeight = initialHeight;
                velocity = 0;
                updateEnergyDisplay();
                drawFrame();
            }
        }

        function updateEnergyDisplay() {
            const pe = mass * g * currentHeight;
            const ke = 0.5 * mass * velocity * velocity;
            const total = pe + ke;

            peValueSpan.textContent = pe.toFixed(1) + ' J';
            keValueSpan.textContent = ke.toFixed(1) + ' J';
            totalValueSpan.textContent = total.toFixed(1) + ' J';
            velocityValueSpan.textContent = velocity.toFixed(2) + ' m/s';
        }

        function drop() {
            if (isDropping) return;
            isDropping = true;
            currentHeight = initialHeight;
            velocity = 0;
            lastTimestamp = performance.now();
            dropButton.textContent = 'Dropping...';
            dropButton.disabled = true;
            animationFrameId = requestAnimationFrame(animate);
        }

        function reset() {
            isDropping = false;
            currentHeight = initialHeight;
            velocity = 0;
            if (animationFrameId) {
                cancelAnimationFrame(animationFrameId);
                animationFrameId = null;
            }
            dropButton.textContent = 'Drop';
            dropButton.disabled = false;
            updateEnergyDisplay();
            drawFrame();
        }

        function drawFrame() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw ground
            ctx.fillStyle = '#86efac';
            ctx.fillRect(0, GROUND_Y, canvas.width, canvas.height - GROUND_Y);

            // Draw height markers
            ctx.strokeStyle = '#e2e8f0';
            ctx.lineWidth = 0.5;
            ctx.font = '10px Arial';
            ctx.fillStyle = '#94a3b8';
            for (let h = 0; h <= 200; h += 50) {
                const y = GROUND_Y - h * SCALE;
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(canvas.width, y);
                ctx.stroke();
                ctx.fillText(h + 'm', 5, y - 2);
            }

            // Draw reference line
            const centerX = 150;
            ctx.strokeStyle = '#cbd5e1';
            ctx.setLineDash([5, 5]);
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(centerX, 0);
            ctx.lineTo(centerX, GROUND_Y);
            ctx.stroke();
            ctx.setLineDash([]);

            // Calculate ball position
            const ballY = GROUND_Y - currentHeight * SCALE;

            // Draw ball
            const gradient = ctx.createRadialGradient(centerX, ballY, 0, centerX, ballY, BALL_RADIUS);
            gradient.addColorStop(0, '#f59e0b');
            gradient.addColorStop(1, '#d97706');
            ctx.fillStyle = gradient;
            ctx.beginPath();
            ctx.arc(centerX, ballY, BALL_RADIUS, 0, 2 * Math.PI);
            ctx.fill();
            ctx.strokeStyle = '#b45309';
            ctx.lineWidth = 2;
            ctx.stroke();

            // Draw mass label
            ctx.fillStyle = '#fff';
            ctx.font = 'bold 12px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(mass.toFixed(0) + 'kg', centerX, ballY + 4);

            // Draw velocity vector
            if (velocity > 0.1) {
                const vScale = 2;
                drawArrow(ctx, centerX + BALL_RADIUS + 10, ballY, centerX + BALL_RADIUS + 10, ballY + velocity * vScale, '#10b981', 'v');
            }

            // Draw energy bars
            if (showBarsCheck.checked) {
                drawEnergyBars();
            }
        }

        function drawEnergyBars() {
            const barX = canvas.width - 200;
            const barY = 50;
            const barWidth = 40;
            const maxBarHeight = 250;

            const pe = mass * g * currentHeight;
            const ke = 0.5 * mass * velocity * velocity;
            const total = mass * g * initialHeight;

            const peHeight = (pe / total) * maxBarHeight;
            const keHeight = (ke / total) * maxBarHeight;

            // PE Bar
            ctx.fillStyle = '#a855f7';
            ctx.fillRect(barX, barY + maxBarHeight - peHeight, barWidth, peHeight);
            ctx.strokeStyle = '#7c3aed';
            ctx.lineWidth = 2;
            ctx.strokeRect(barX, barY, barWidth, maxBarHeight);
            ctx.fillStyle = '#000';
            ctx.font = 'bold 12px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('PE', barX + barWidth / 2, barY + maxBarHeight + 15);

            // KE Bar
            ctx.fillStyle = '#f59e0b';
            ctx.fillRect(barX + 60, barY + maxBarHeight - keHeight, barWidth, keHeight);
            ctx.strokeStyle = '#d97706';
            ctx.lineWidth = 2;
            ctx.strokeRect(barX + 60, barY, barWidth, maxBarHeight);
            ctx.fillStyle = '#000';
            ctx.fillText('KE', barX + 60 + barWidth / 2, barY + maxBarHeight + 15);

            // Total Bar (reference)
            ctx.fillStyle = 'rgba(16, 185, 129, 0.3)';
            ctx.fillRect(barX + 120, barY, barWidth, maxBarHeight);
            ctx.strokeStyle = '#10b981';
            ctx.lineWidth = 2;
            ctx.strokeRect(barX + 120, barY, barWidth, maxBarHeight);
            ctx.fillStyle = '#000';
            ctx.fillText('Total', barX + 120 + barWidth / 2, barY + maxBarHeight + 15);
        }

        function drawArrow(ctx, fromX, fromY, toX, toY, color, label) {
            const headLength = 10;
            const dx = toX - fromX;
            const dy = toY - fromY;

            if (Math.abs(dx) < 1 && Math.abs(dy) < 1) return;

            const angle = Math.atan2(dy, dx);

            ctx.strokeStyle = color;
            ctx.fillStyle = color;
            ctx.lineWidth = 3;

            // Arrow line
            ctx.beginPath();
            ctx.moveTo(fromX, fromY);
            ctx.lineTo(toX, toY);
            ctx.stroke();

            // Arrow head
            ctx.beginPath();
            ctx.moveTo(toX, toY);
            ctx.lineTo(toX - headLength * Math.cos(angle - Math.PI / 6), toY - headLength * Math.sin(angle - Math.PI / 6));
            ctx.lineTo(toX - headLength * Math.cos(angle + Math.PI / 6), toY - headLength * Math.sin(angle + Math.PI / 6));
            ctx.closePath();
            ctx.fill();

            // Label
            if (label) {
                ctx.fillStyle = color;
                ctx.font = 'bold 12px Arial';
                ctx.textAlign = 'left';
                ctx.fillText(label, toX + 10, toY);
            }
        }

        function animate(timestamp) {
            if (!isDropping) return;

            const deltaTime = (timestamp - lastTimestamp) / 1000;
            lastTimestamp = timestamp;

            if (deltaTime > 0 && deltaTime < 0.1) {
                // Update velocity and height using energy conservation
                // v² = 2g(h₀ - h)
                const heightDrop = initialHeight - currentHeight;
                velocity = Math.sqrt(2 * g * heightDrop);

                // Update height
                currentHeight -= velocity * deltaTime;

                if (currentHeight <= 0) {
                    currentHeight = 0;
                    velocity = Math.sqrt(2 * g * initialHeight); // Final velocity
                    isDropping = false;
                    dropButton.textContent = 'Drop';
                    dropButton.disabled = false;
                }

                updateEnergyDisplay();
            }

            drawFrame();

            if (isDropping) {
                animationFrameId = requestAnimationFrame(animate);
            }
        }

        function resizeCanvas() {
            canvas.width = canvas.offsetWidth;
            canvas.height = canvasHeight;
            updateParameters();
        }

        // Event Listeners
        window.addEventListener('resize', resizeCanvas);
        massSlider.addEventListener('input', updateParameters);
        heightSlider.addEventListener('input', updateParameters);
        gravitySlider.addEventListener('input', updateParameters);
        dropButton.addEventListener('click', drop);
        resetButton.addEventListener('click', reset);

        // Language Switching
        const langToggleButton = document.getElementById('langToggleButton');
        let currentNotesLanguage = 'en';
        const languageData = {
            notesTitle: { en: "Energy Conservation & Work", ta: "ஆற்றல் பாதுகாப்பு & வேலை" },
            conservationTitle: { en: "Law of Conservation of Energy", ta: "ஆற்றல் பாதுகாப்பு விதி" },
            conservationDesc: { en: "Energy cannot be created or destroyed, only transformed from one form to another. In this simulation, gravitational potential energy (PE) converts to kinetic energy (KE) as the object falls, while the total mechanical energy remains constant (ignoring air resistance).", ta: "ஆற்றலை உருவாக்கவோ அழிக்கவோ முடியாது, ஒரு வடிவத்திலிருந்து மற்றொரு வடிவத்திற்கு மாற்ற மட்டுமே முடியும். இந்த உருவகப்படுத்துதலில், பொருள் விழும்போது ஈர்ப்பு நிலை ஆற்றல் (PE) இயக்க ஆற்றலாக (KE) மாறுகிறது, மொத்த இயந்திர ஆற்றல் நிலையானதாக இருக்கும் (காற்று எதிர்ப்பைப் புறக்கணித்து)." },
            equationsTitle: { en: "Key Equations", ta: "முக்கிய சமன்பாடுகள்" },
            eqPE: { en: "Gravitational Potential Energy: <code>PE = mgh</code>", ta: "ஈர்ப்பு நிலை ஆற்றல்: <code>PE = mgh</code>" },
            eqKE: { en: "Kinetic Energy: <code>KE = ½mv²</code>", ta: "இயக்க ஆற்றல்: <code>KE = ½mv²</code>" },
            eqTotal: { en: "Total Mechanical Energy: <code>E_total = PE + KE</code>", ta: "மொத்த இயந்திர ஆற்றல்: <code>E_total = PE + KE</code>" },
            eqWork: { en: "Work: <code>W = F × d × cos(θ)</code>", ta: "வேலை: <code>W = F × d × cos(θ)</code>" },
            eqWorkEnergy: { en: "Work-Energy Theorem: <code>W = ΔKE</code>", ta: "வேலை-ஆற்றல் தேற்றம்: <code>W = ΔKE</code>" },
            eqVars: { en: "<em>Where: m=mass, g=gravity, h=height, v=velocity, F=force, d=displacement, θ=angle</em>", ta: "<em>இங்கு: m=நிறை, g=ஈர்ப்பு, h=உயரம், v=திசைவேகம், F=விசை, d=இடப்பெயர்ச்சி, θ=கோணம்</em>" },
            energyTypesTitle: { en: "Types of Energy", ta: "ஆற்றல் வகைகள்" },
            peType: { en: "<strong>Potential Energy (PE):</strong> Energy stored due to position or configuration. In this case, gravitational PE depends on height.", ta: "<strong>நிலை ஆற்றல் (PE):</strong> நிலை அல்லது கட்டமைப்பு காரணமாக சேமிக்கப்பட்ட ஆற்றல். இந்த வழக்கில், ஈர்ப்பு PE உயரத்தைப் பொறுத்தது." },
            keType: { en: "<strong>Kinetic Energy (KE):</strong> Energy of motion. Increases as the object accelerates downward.", ta: "<strong>இயக்க ஆற்றல் (KE):</strong> இயக்கத்தின் ஆற்றல். பொருள் கீழ்நோக்கி முடுக்கிவிடும்போது அதிகரிக்கிறது." },
            tipsTitle: { en: "Simulation Tips", ta: "உருவகப்படுத்துதல் குறிப்புகள்" },
            tip1: { en: "Watch how PE decreases while KE increases, but total energy stays constant.", ta: "PE குறையும்போது KE அதிகரிக்கிறது, ஆனால் மொத்த ஆற்றல் நிலையானதாக இருக்கும் என்பதைக் கவனியுங்கள்." },
            tip2: { en: "Try different masses - notice that total energy scales with mass.", ta: "வெவ்வேறு நிறைகளை முயற்சிக்கவும் - மொத்த ஆற்றல் நிறையுடன் அளவிடப்படுகிறது என்பதைக் கவனியுங்கள்." },
            tip3: { en: "Change gravity to see how it affects the rate of energy conversion.", ta: "ஆற்றல் மாற்றத்தின் வீதத்தை எவ்வாறு பாதிக்கிறது என்பதைப் பார்க்க ஈர்ப்பை மாற்றவும்." }
        };

        function updateNotesLanguage(lang) {
            document.querySelectorAll('[data-lang-key]').forEach(element => {
                const key = element.getAttribute('data-lang-key');
                if (languageData[key] && languageData[key][lang]) {
                    element.innerHTML = languageData[key][lang];
                }
            });
            langToggleButton.textContent = lang === 'en' ? 'தமிழ்' : 'English';
        }

        langToggleButton.addEventListener('click', (event) => {
            event.stopPropagation();
            currentNotesLanguage = (currentNotesLanguage === 'en') ? 'ta' : 'en';
            updateNotesLanguage(currentNotesLanguage);
        });

        // Initial Setup
        document.addEventListener('DOMContentLoaded', () => {
            resizeCanvas();
            updateNotesLanguage(currentNotesLanguage);
            const notesSection = document.getElementById('notesSection');
            const notesHeader = notesSection.querySelector('.notes-header');
            if (notesHeader && notesSection) {
                notesHeader.addEventListener('click', (event) => {
                    if (event.target !== langToggleButton && !langToggleButton.contains(event.target)) {
                        notesSection.classList.toggle('notes-open');
                    }
                });
            }
        });

    </script>
</body>

</html>