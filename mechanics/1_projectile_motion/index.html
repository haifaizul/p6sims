<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projectile Motion - p6sims</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../../style.css">
    <style>
        /* Simulation Specific Styles */
        :root {
            --panel-bg-color: #f8fafc;
            --slider-track-color: #e2e8f0;
            --code-bg-color: #f1f5f9;
        }

        body {
            display: block;
            padding: 0;
            background-color: var(--bg-color);
        }

        .simulation-wrapper {
            max-width: 900px;
            margin: 40px auto;
            background: var(--surface-color);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
            padding: 30px;
            border: 1px solid var(--border-color);
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2rem;
        }

        .controls-panel {
            margin-bottom: 24px;
            padding: 20px;
            background-color: var(--panel-bg-color);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
        }

        .control-group {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border-color);
        }

        .control-group:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .control-item {
            display: flex;
            align-items: center;
            flex: 1 1 250px;
        }

        .control-item label {
            min-width: 120px;
            font-weight: 500;
            color: var(--text-muted);
        }

        input[type="range"] {
            flex-grow: 1;
            margin: 0 12px;
            cursor: pointer;
            height: 6px;
            background: var(--slider-track-color);
            border-radius: 4px;
            appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 16px;
            height: 16px;
            background: var(--primary-color);
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.1s;
        }

        input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.2);
        }

        .value-display {
            min-width: 60px;
            text-align: right;
            font-family: monospace;
            font-weight: 600;
            color: var(--primary-color);
        }

        .sim-button {
            padding: 10px 24px;
            background-color: var(--text-main);
            color: white;
            border: none;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            margin: 0 5px;
        }

        .sim-button:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .sim-button.secondary {
            background-color: transparent;
            color: var(--text-main);
            border: 1px solid var(--border-color);
        }

        canvas {
            border: 1px solid var(--border-color);
            background-color: #ffffff;
            display: block;
            width: 100%;
            height: 400px;
            border-radius: var(--radius-md);
            margin-bottom: 24px;
        }

        .info-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            padding: 15px;
            background: #eff6ff;
            border-radius: var(--radius-md);
            margin-bottom: 24px;
            border: 1px solid #dbeafe;
        }

        .info-item {
            text-align: center;
        }

        .info-item strong {
            display: block;
            font-size: 0.75rem;
            text-transform: uppercase;
            color: var(--text-muted);
            margin-bottom: 4px;
        }

        .info-item span {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--primary-color);
        }

        /* Notes Section */
        .notes-section {
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            overflow: hidden;
            background: var(--bg-color);
        }

        .notes-header {
            padding: 16px 20px;
            background: white;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
        }

        .notes-header h3 {
            margin: 0;
            font-size: 1.1rem;
        }

        .notes-content {
            padding: 20px;
            display: none;
        }

        .notes-section.notes-open .notes-content {
            display: block;
        }

        .note-block {
            margin-bottom: 20px;
        }

        .note-block h4 {
            color: var(--text-main);
            margin-bottom: 8px;
        }

        .note-block p,
        .note-block li {
            color: var(--text-muted);
            font-size: 0.95rem;
        }

        code {
            background: var(--code-bg-color);
            padding: 2px 6px;
            border-radius: 4px;
            color: var(--primary-color);
            font-size: 0.9em;
        }

        .lang-button {
            padding: 4px 10px;
            font-size: 0.75rem;
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            cursor: pointer;
            color: var(--text-secondary);
            transition: all 0.2s;
        }

        .lang-button:hover {
            border-color: var(--primary-color);
            color: var(--primary-color);
        }
    </style>
</head>

<body>

    <header class="site-header">
        <div class="container">
            <a href="../../index.html" class="logo">p6sims</a>
            <nav class="nav-links">
                <a href="../../index.html#simulations">All Simulations</a>
                <a href="../../index.html#about">About</a>
            </nav>
        </div>
    </header>

    <main class="container">
        <div class="simulation-wrapper">
            <div style="margin-bottom: 20px;">
                <a href="../../mechanics.html" style="color: var(--text-muted); font-size: 0.9rem;">&larr; Back to
                    Mechanics</a>
            </div>

            <h1>Projectile Motion Simulation</h1>

            <div class="controls-panel">
                <div class="control-group">
                    <div class="control-item">
                        <label>Initial Velocity:</label>
                        <input type="range" id="velocity" min="10" max="50" value="30">
                        <span id="velocityValue" class="value-display">30 m/s</span>
                    </div>
                    <div class="control-item">
                        <label>Launch Angle:</label>
                        <input type="range" id="angle" min="0" max="90" value="45">
                        <span id="angleValue" class="value-display">45°</span>
                    </div>
                </div>
                <div class="control-group">
                    <div class="control-item">
                        <label>Gravity:</label>
                        <input type="range" id="gravity" min="1" max="20" step="0.5" value="9.8">
                        <span id="gravityValue" class="value-display">9.8 m/s²</span>
                    </div>
                    <div class="control-item">
                        <label>Show Vectors:</label>
                        <div style="display: flex; gap: 15px;">
                            <label style="min-width: auto; font-weight: normal;"><input type="checkbox"
                                    id="showVelocity" checked> Velocity</label>
                            <label style="min-width: auto; font-weight: normal;"><input type="checkbox" id="showAccel"
                                    checked> Acceleration</label>
                        </div>
                    </div>
                </div>
                <div style="text-align: center; margin-top: 10px;">
                    <button id="launchButton" class="sim-button">Launch</button>
                    <button id="resetButton" class="sim-button secondary">Reset</button>
                </div>
            </div>

            <div class="info-panel">
                <div class="info-item"><strong>Max Height</strong> <span id="maxHeight">0 m</span></div>
                <div class="info-item"><strong>Range</strong> <span id="range">0 m</span></div>
                <div class="info-item"><strong>Time of Flight</strong> <span id="timeOfFlight">0 s</span></div>
                <div class="info-item"><strong>Current Time</strong> <span id="currentTime">0 s</span></div>
            </div>

            <canvas id="projectileCanvas"></canvas>

            <section id="notesSection" class="notes-section">
                <div class="notes-header">
                    <h3 data-lang-key="notesTitle">Key Concepts & Equations</h3>
                    <button id="langToggleButton" class="lang-button">தமிழ்</button>
                </div>
                <div class="notes-content">
                    <div class="note-block">
                        <h4 data-lang-key="projectileTitle">Projectile Motion</h4>
                        <p data-lang-key="projectileDesc">Projectile motion is a form of motion where an object moves in
                            a parabolic path. The path that the object follows is called its trajectory. It's a
                            combination of horizontal motion (constant velocity) and vertical motion (constant
                            acceleration due to gravity).</p>
                    </div>
                    <div class="note-block">
                        <h4 data-lang-key="equationsTitle">Key Equations</h4>
                        <ul>
                            <li data-lang-key="eqVx">Horizontal Velocity: <code>vₓ = v₀ cos(θ)</code></li>
                            <li data-lang-key="eqVy">Vertical Velocity: <code>vᵧ = v₀ sin(θ) - gt</code></li>
                            <li data-lang-key="eqX">Horizontal Position: <code>x = v₀ cos(θ) × t</code></li>
                            <li data-lang-key="eqY">Vertical Position: <code>y = v₀ sin(θ) × t - ½gt²</code></li>
                            <li data-lang-key="eqMaxH">Maximum Height: <code>H = (v₀ sin(θ))² / (2g)</code></li>
                            <li data-lang-key="eqRange">Range: <code>R = v₀² sin(2θ) / g</code></li>
                            <li data-lang-key="eqTime">Time of Flight: <code>T = 2v₀ sin(θ) / g</code></li>
                        </ul>
                    </div>
                    <div class="note-block">
                        <h4 data-lang-key="tipsTitle">Simulation Tips</h4>
                        <ul>
                            <li data-lang-key="tip1">Try 45° for maximum range (when gravity is standard).</li>
                            <li data-lang-key="tip2">Observe how velocity vectors change during flight - horizontal
                                component remains constant while vertical component changes.</li>
                            <li data-lang-key="tip3">Experiment with different gravity values to see how it affects the
                                trajectory.</li>
                        </ul>
                    </div>
                </div>
            </section>

        </div>
    </main>

    <footer class="site-footer">
        <div class="container">
            <p>&copy; <span id="currentYear"></span> p6sims. Built by Hai.</p>
        </div>
    </footer>

    <script>
        document.getElementById('currentYear').textContent = new Date().getFullYear();
    </script>

    <script>
        // Core simulation logic
        const canvas = document.getElementById('projectileCanvas');
        const ctx = canvas.getContext('2d');
        const canvasHeight = 400;

        // Controls
        const velocitySlider = document.getElementById('velocity');
        const angleSlider = document.getElementById('angle');
        const gravitySlider = document.getElementById('gravity');
        const showVelocityCheck = document.getElementById('showVelocity');
        const showAccelCheck = document.getElementById('showAccel');
        const launchButton = document.getElementById('launchButton');
        const resetButton = document.getElementById('resetButton');

        // Value displays
        const velocityValueSpan = document.getElementById('velocityValue');
        const angleValueSpan = document.getElementById('angleValue');
        const gravityValueSpan = document.getElementById('gravityValue');
        const maxHeightSpan = document.getElementById('maxHeight');
        const rangeSpan = document.getElementById('range');
        const timeOfFlightSpan = document.getElementById('timeOfFlight');
        const currentTimeSpan = document.getElementById('currentTime');

        let v0, angle, g;
        let isLaunched = false;
        let time = 0;
        let animationFrameId = null;
        let lastTimestamp = 0;
        let trajectory = [];

        const SCALE = 5; // pixels per meter
        const GROUND_Y = 350;

        function updateParameters() {
            v0 = parseFloat(velocitySlider.value);
            angle = parseFloat(angleSlider.value);
            g = parseFloat(gravitySlider.value);

            velocityValueSpan.textContent = v0.toFixed(0) + ' m/s';
            angleValueSpan.textContent = angle.toFixed(0) + '°';
            gravityValueSpan.textContent = g.toFixed(1) + ' m/s²';

            const angleRad = angle * Math.PI / 180;
            const maxHeight = (v0 * Math.sin(angleRad)) ** 2 / (2 * g);
            const range = (v0 ** 2 * Math.sin(2 * angleRad)) / g;
            const totalTime = (2 * v0 * Math.sin(angleRad)) / g;

            maxHeightSpan.textContent = maxHeight.toFixed(1) + ' m';
            rangeSpan.textContent = range.toFixed(1) + ' m';
            timeOfFlightSpan.textContent = totalTime.toFixed(2) + ' s';

            if (!isLaunched) {
                drawFrame();
            }
        }

        function launch() {
            if (isLaunched) return;
            isLaunched = true;
            time = 0;
            trajectory = [];
            lastTimestamp = performance.now();
            launchButton.textContent = 'In Flight...';
            launchButton.disabled = true;
            animationFrameId = requestAnimationFrame(animate);
        }

        function reset() {
            isLaunched = false;
            time = 0;
            trajectory = [];
            if (animationFrameId) {
                cancelAnimationFrame(animationFrameId);
                animationFrameId = null;
            }
            launchButton.textContent = 'Launch';
            launchButton.disabled = false;
            currentTimeSpan.textContent = '0 s';
            drawFrame();
        }

        function drawFrame() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw ground
            ctx.fillStyle = '#86efac';
            ctx.fillRect(0, GROUND_Y, canvas.width, canvas.height - GROUND_Y);

            // Draw grid
            ctx.strokeStyle = '#e2e8f0';
            ctx.lineWidth = 0.5;
            for (let x = 0; x < canvas.width; x += 50) {
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, GROUND_Y);
                ctx.stroke();
            }
            for (let y = 0; y < GROUND_Y; y += 50) {
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(canvas.width, y);
                ctx.stroke();
            }

            const angleRad = angle * Math.PI / 180;
            const x = v0 * Math.cos(angleRad) * time;
            const y = v0 * Math.sin(angleRad) * time - 0.5 * g * time * time;

            const canvasX = 50 + x * SCALE;
            const canvasY = GROUND_Y - y * SCALE;

            // Draw trajectory
            if (trajectory.length > 0) {
                ctx.strokeStyle = '#3b82f6';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(trajectory[0].x, trajectory[0].y);
                for (let i = 1; i < trajectory.length; i++) {
                    ctx.lineTo(trajectory[i].x, trajectory[i].y);
                }
                ctx.stroke();
            }

            // Draw launch angle preview
            if (!isLaunched) {
                ctx.strokeStyle = '#94a3b8';
                ctx.lineWidth = 1;
                ctx.setLineDash([5, 5]);
                ctx.beginPath();
                ctx.moveTo(50, GROUND_Y);
                const previewLength = 100;
                ctx.lineTo(50 + previewLength * Math.cos(angleRad), GROUND_Y - previewLength * Math.sin(angleRad));
                ctx.stroke();
                ctx.setLineDash([]);
            }

            // Draw projectile
            if (y >= 0 || !isLaunched) {
                ctx.fillStyle = '#ef4444';
                ctx.beginPath();
                ctx.arc(canvasX, canvasY, 8, 0, 2 * Math.PI);
                ctx.fill();
            }
        }

        function animate(timestamp) {
            if (!isLaunched) return;

            const deltaTime = (timestamp - lastTimestamp) / 1000;
            lastTimestamp = timestamp;

            if (deltaTime > 0 && deltaTime < 0.1) {
                time += deltaTime;
            }

            const angleRad = angle * Math.PI / 180;
            const x = v0 * Math.cos(angleRad) * time;
            const y = v0 * Math.sin(angleRad) * time - 0.5 * g * time * time;

            const canvasX = 50 + x * SCALE;
            const canvasY = GROUND_Y - y * SCALE;

            if (y >= 0) {
                trajectory.push({ x: canvasX, y: canvasY });
                currentTimeSpan.textContent = time.toFixed(2) + ' s';
                drawFrame();
                animationFrameId = requestAnimationFrame(animate);
            } else {
                // Landed
                isLaunched = false;
                launchButton.textContent = 'Launch';
                launchButton.disabled = false;
                drawFrame();
            }
        }

        function resizeCanvas() {
            canvas.width = canvas.offsetWidth;
            canvas.height = canvasHeight;
            updateParameters();
        }

        // Event Listeners
        window.addEventListener('resize', resizeCanvas);
        velocitySlider.addEventListener('input', updateParameters);
        angleSlider.addEventListener('input', updateParameters);
        gravitySlider.addEventListener('input', updateParameters);
        launchButton.addEventListener('click', launch);
        resetButton.addEventListener('click', reset);

        // Language Switching
        const langToggleButton = document.getElementById('langToggleButton');
        let currentNotesLanguage = 'en';
        const languageData = {
            notesTitle: { en: "Key Concepts & Equations", ta: "முக்கிய கருத்துகள் & சமன்பாடுகள்" },
            projectileTitle: { en: "Projectile Motion", ta: "எறிபொருள் இயக்கம்" },
            projectileDesc: { en: "Projectile motion is a form of motion where an object moves in a parabolic path. The path that the object follows is called its trajectory. It's a combination of horizontal motion (constant velocity) and vertical motion (constant acceleration due to gravity).", ta: "எறிபொருள் இயக்கம் என்பது ஒரு பொருள் பரவளைய பாதையில் நகரும் இயக்க வடிவமாகும். பொருள் பின்பற்றும் பாதை அதன் பாதை எனப்படும். இது கிடைமட்ட இயக்கம் (நிலையான திசைவேகம்) மற்றும் செங்குத்து இயக்கம் (ஈர்ப்பு காரணமாக நிலையான முடுக்கம்) ஆகியவற்றின் கலவையாகும்." },
            equationsTitle: { en: "Key Equations", ta: "முக்கிய சமன்பாடுகள்" },
            eqVx: { en: "Horizontal Velocity: <code>vₓ = v₀ cos(θ)</code>", ta: "கிடைமட்ட திசைவேகம்: <code>vₓ = v₀ cos(θ)</code>" },
            eqVy: { en: "Vertical Velocity: <code>vᵧ = v₀ sin(θ) - gt</code>", ta: "செங்குத்து திசைவேகம்: <code>vᵧ = v₀ sin(θ) - gt</code>" },
            eqX: { en: "Horizontal Position: <code>x = v₀ cos(θ) × t</code>", ta: "கிடைமட்ட நிலை: <code>x = v₀ cos(θ) × t</code>" },
            eqY: { en: "Vertical Position: <code>y = v₀ sin(θ) × t - ½gt²</code>", ta: "செங்குத்து நிலை: <code>y = v₀ sin(θ) × t - ½gt²</code>" },
            eqMaxH: { en: "Maximum Height: <code>H = (v₀ sin(θ))² / (2g)</code>", ta: "அதிகபட்ச உயரம்: <code>H = (v₀ sin(θ))² / (2g)</code>" },
            eqRange: { en: "Range: <code>R = v₀² sin(2θ) / g</code>", ta: "வீச்சு: <code>R = v₀² sin(2θ) / g</code>" },
            eqTime: { en: "Time of Flight: <code>T = 2v₀ sin(θ) / g</code>", ta: "பறக்கும் நேரம்: <code>T = 2v₀ sin(θ) / g</code>" },
            tipsTitle: { en: "Simulation Tips", ta: "உருவகப்படுத்துதல் குறிப்புகள்" },
            tip1: { en: "Try 45° for maximum range (when gravity is standard).", ta: "அதிகபட்ச வீச்சுக்கு 45° முயற்சிக்கவும் (ஈர்ப்பு நிலையானதாக இருக்கும்போது)." },
            tip2: { en: "Observe how velocity vectors change during flight - horizontal component remains constant while vertical component changes.", ta: "பறக்கும் போது திசைவேக திசையன்கள் எவ்வாறு மாறுகின்றன என்பதைக் கவனியுங்கள் - கிடைமட்ட கூறு நிலையானதாக இருக்கும் போது செங்குத்து கூறு மாறுகிறது." },
            tip3: { en: "Experiment with different gravity values to see how it affects the trajectory.", ta: "பாதையை எவ்வாறு பாதிக்கிறது என்பதைப் பார்க்க வெவ்வேறு ஈர்ப்பு மதிப்புகளுடன் பரிசோதனை செய்யுங்கள்." }
        };

        function updateNotesLanguage(lang) {
            document.querySelectorAll('[data-lang-key]').forEach(element => {
                const key = element.getAttribute('data-lang-key');
                if (languageData[key] && languageData[key][lang]) {
                    element.innerHTML = languageData[key][lang];
                }
            });
            langToggleButton.textContent = lang === 'en' ? 'தமிழ்' : 'English';
        }

        langToggleButton.addEventListener('click', (event) => {
            event.stopPropagation();
            currentNotesLanguage = (currentNotesLanguage === 'en') ? 'ta' : 'en';
            updateNotesLanguage(currentNotesLanguage);
        });

        // Initial Setup
        document.addEventListener('DOMContentLoaded', () => {
            resizeCanvas();
            updateNotesLanguage(currentNotesLanguage);
            const notesSection = document.getElementById('notesSection');
            const notesHeader = notesSection.querySelector('.notes-header');
            if (notesHeader && notesSection) {
                notesHeader.addEventListener('click', (event) => {
                    if (event.target !== langToggleButton && !langToggleButton.contains(event.target)) {
                        notesSection.classList.toggle('notes-open');
                    }
                });
            }
        });

    </script>
</body>

</html>